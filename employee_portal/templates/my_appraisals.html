{% extends "base.html" %}
{% block content %}
<div class="container-fluid py-4">
    <div class="mb-4">
        <h3 class="fw-bold text-dark">My Performance Reviews</h3>
        <p class="text-muted small">View your historical appraisal scores and feedback.</p>
    </div>
    
    {% if appraisals %}
        {% for app in appraisals %}
        <div class="card border-0 shadow-sm rounded-4 mb-4 overflow-hidden" style="border: 1px solid #e2e8f0 !important;">
            <div class="card-header bg-white py-3 border-0 rounded-top-4 d-flex justify-content-between align-items-center" style="border-left: 4px solid #e67e22 !important;">
                <h6 class="m-0 fw-semibold text-dark"><i class="bi bi-star-fill me-2 text-primary"></i>{{ app.period }} Appraisal</h6>
                <span class="text-success fw-bold extra-small">Finalized</span>
            </div>
            <div class="card-body p-4">
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="p-3 bg-light rounded-4 text-center">
                            <div class="extra-small fw-bold text-muted text-uppercase mb-1">Overall Score</div>
                            <div class="display-5 fw-bold text-primary">{{ app.score }}<span class="fs-6 text-muted">/5</span></div>
                        </div>
                        <div class="mt-3 ps-2">
                            <div class="extra-small text-muted text-uppercase fw-bold">Reviewer</div>
                            <div class="small fw-semibold text-dark">{{ app.reviewer.first_name }} {{ app.reviewer.last_name if app.reviewer else 'System Admin' }}</div>
                            <div class="extra-small text-muted mt-2 text-uppercase fw-bold">Review Date</div>
                            <div class="small fw-semibold text-dark">{{ app.appraisal_date.strftime('%d %b %Y') }}</div>
                        </div>
                    </div>
                    <div class="col-md-8 border-start border-light ps-md-4">
                        <h6 class="extra-small fw-bold text-uppercase text-secondary mb-2">Performance Feedback</h6>
                        <div class="p-3 bg-light rounded-3 mb-4 small text-dark lh-base">
                            {{ app.feedback or 'No feedback provided.' }}
                        </div>
                        
                        <h6 class="extra-small fw-bold text-uppercase text-secondary mb-2">Development Goals</h6>
                        <div class="p-3 bg-light rounded-3 small text-dark lh-base">
                            {{ app.goals or 'No specific goals set for the next period.' }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="card border-0 shadow-sm rounded-4 py-5 text-center" style="border: 1px solid #e2e8f0 !important;">
            <i class="bi bi-clipboard-x display-4 opacity-25 d-block mb-3"></i>
            <p class="text-muted fw-semibold">No performance appraisals found yet.</p>
        </div>
    {% endif %}
</div>

<style>
    .extra-small { font-size: 0.7rem; }
    .rounded-top-4 { border-top-left-radius: 12px !important; border-top-right-radius: 12px !important; }
</style>
{% endblock %}